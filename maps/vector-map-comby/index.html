<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>

	<style type="text/css" media="screen">
		#map {
			width: 650px;
			height: 600px;
			margin: 150px auto;
		}

		.leaflet-image-layer {
			z-index: 99;
		}

		.leaflet-container {
		    background: rgba(181,233,255,1);
		}
	</style>
</head>
<body>
	<div id="map"></div>

	<script type="text/javascript" charset="utf-8" >
		var map = L.map('map', {
			    center: [44.5423418, 5.6882768],
			    zoom: 9,
			    minZoom: 9,
			    maxZoom: 9,
			    maxBounds: [[39.4700000, -9.9600000], [53.6700000, 14.6400000]]
			});
		var imageUrl = 'https://meteo.pleinchamp.com/mg-swf/radar/fr1x1/radar_prog-fr_20151210_1310.png?antiCache=5157260233';
    	var imageBounds = [[39.4700000, -9.9600000], [53.6700000, 14.6400000]];

    	map.setMaxBounds([
		    [39.4700000, -9.9600000],
		    [53.6700000, 14.6400000]
		]);

		var francePoly = L.geoJson(null, {
			style: franceStyle,
			onEachFeature: onEachFeature

		});
		var franceInnerBoundaries = L.geoJson(null, {
			style: franceBoundariesStyle,
			onEachFeature: onEachFeature
		});

		var neibBoundaries = L.geoJson(null, {
			style: neibBoundariesStyle,
			onEachFeature: onEachFeature
		});
		var neibPoly = L.geoJson(null, {
			style: neibPolyStyle
		});
		var waterLine = L.geoJson(null, {
			style: waterLineStyle
		});
		var waterPoly = L.geoJson(null, {
			style: waterPolyStyle
		});
		var road = L.geoJson(null, {
			style: roadStyle
		});


		omnivore.topojson('data/topojson/poly.topojson', null, francePoly).addTo(map);

		omnivore.topojson('data/topojson/admin1.topojson', null, franceInnerBoundaries).addTo(map);

		omnivore.topojson('data/topojson/admin2.topojson', null, franceInnerBoundaries).addTo(map);

		var circle = L.circleMarker([44.5423418, 5.6882768]).addTo(map);
		circle.setRadius(5);

		circle.setStyle({
			stroke: false,
			fill: true,
			fillColor: '#FF6500',
			fillOpacity: 1
		});

		circle.bindPopup('Hello!');
		
		L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
		    maxZoom: 18
		}).addTo(map);


		// omnivore.topojson('data/topojson/neighine.topojson', null, neibBoundaries).addTo(map);

		// omnivore.topojson('data/topojson/neighpoly.topojson', null, neibPoly).addTo(map);

		// omnivore.topojson('data/topojson/water_line.topojson', null, waterLine).addTo(map);

		// omnivore.topojson('data/topojson/water_poly.topojson', null, waterPoly).addTo(map);

		// omnivore.topojson('data/topojson/road.topojson', null, road).addTo(map);

		// var a = L.imageOverlay(imageUrl, imageBounds).addTo(map);

		// a.bringToFront();

		function franceStyle(feature) {
			return {
				stroke: true,
				weight: 2,
				color: '#4E4E4E',
				fill: false,
				fillColor: '#E7FFA5',
				fillOpacity: 1,
				opacity: 1
			};
		}

		function franceBoundariesStyle(feature) {
			return {
				stroke: true,
				weight: 2,
				color: '#4E4E4E',
				opacity: 1
			};
		}

		function neibBoundariesStyle(feature) {
			return {
				stroke: true,
				weight: 1,
				color: 'rgba(79,79,79,1)',
				opacity: 1
			};
		}

		function neibPolyStyle(feature) {
			return {
				stroke: true,
				weight: 1,
				color: 'rgba(79,79,79,1)',
				fill: true,
				fillColor: '#F7FFE1',
				fillOpacity: 1,
				opacity: 1
			};
		}

		function waterLineStyle(feature) {
			return {
				stroke: true,
				weight: 1,
				color: 'rgba(20,187,252,1)',
				fill: false
			};
		}

		function waterPolyStyle(feature) {
			return {
				stroke: false,
				fill: true,
				fillColor: 'rgba(20,187,252,1)',
				fillOpacity: 1,
				opacity: 1
			};
		}

		function roadStyle(feature) {
			return {
				stroke: true,
				weight: 1.5,
				color: '#D13757',
				fill: false
			};
		}

		function highlightFeature(e) {
		    var layer = e.target;

		    layer.setStyle({
		        weight: 5,
		        color: '#666',
		        dashArray: '',
		        fillOpacity: 0.7
		    });

		    if (!L.Browser.ie && !L.Browser.opera) {
		        layer.bringToFront();
		    }
		}

		function resetHighlight(e) {
		    geojson.resetStyle(e.target);
		}

		function onEachFeature(feature, layer) {
		    // layer.on({
		    //     mouseover: highlightFeature,
		    //     mouseout: highlightFeature,
		    //     click: zoomToFeature
		    // });
		}

		function zoomToFeature(e) {
		    map.fitBounds(e.target.getBounds());
		}
	</script>
</body>
</html>