<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>

	<style type="text/css" media="screen">
		#map {
			width: 650px;
			height: 600px;
			margin: 150px auto;
		}

		.leaflet-image-layer {
			z-index: 99;
		}
	</style>
</head>
<body>
	<div id="map"></div>

	<script type="text/javascript" charset="utf-8" >
		var map = L.map('map', {
			    center: [47, 2.5],
			    zoom: 5,
			    minZoom: 5,
			    maxZoom: 9,
			    maxBounds: [[39.4700000, -9.9600000], [53.6700000, 14.6400000]]
			});
		var imageUrl = 'http://dznavitski.github.io/maps/img/radar_prog-fr_20151215_0950.png';
    	var imageBounds = [[39.4700000, -9.9600000], [53.6700000, 14.6400000]];

    	var francePoly = L.geoJson(null, {
			style: franceStyle
		});


		L.tileLayer('http://api.mapbox.com/v3/mapbox.natural-earth-hypso-bathy/{z}/{x}/{y}.png', {
		    maxZoom: 6,
		    attribution: 'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
		}).addTo(map);

		L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
		    maxZoom: 18,
		    minZoom: 7
		}).addTo(map);

		L.imageOverlay(imageUrl, imageBounds).addTo(map);

		omnivore.topojson('data/topojson/poly.topojson', null, francePoly).addTo(map);

		function franceStyle(feature) {
			return {
				stroke: true,
				weight: 1,
				color: 'rgba(79,79,79,1)',
				fill: true,
				fillColor: 'rgba(151,199,55,1)',
				fillOpacity: 0.9,
				opacity: 1
			};
		}

		map.on('zoomend', onZoomend);

		function onZoomend(){
		    if (map.getZoom() >= 7) {
		     	map.removeLayer(francePoly);
		    }

		    if (map.getZoom() < 7) {
		    	map.addLayer(francePoly);
		  	};
		};
	</script>
</body>
</html>